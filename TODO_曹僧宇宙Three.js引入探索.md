# 曹僧宇宙 Three.js 引入探索 TODO

> **🤖 AI 助手注意 (AI Assistant Attention)**
> 在执行本文件中的任何任务前，你必须首先阅读并严格遵守位于 `documentation/ai-collaboration-guide.md` 的全局协作指南。

## 目标

将曹僧宇宙"新品发布"模块从纯CSS升级为Three.js 3D体验，实现接近概念图的视觉效果。

**目标效果**（参考Gemini生成的概念图）：
- 3D立体售货机，带透视角度
- 真实3D产品模型展示（已有14个GLB文件）
- 金属质感、玻璃反光、霓虹灯光
- 蒸汽/烟雾粒子效果
- 废土朋克+赛博朋克混合美学

**现有资源**：
- 14个GLB模型文件（`modules/caogong/xinpin/assets/GLB/`）
  - Tomato.glb, shy fly.glb, Ship.glb, Bread Roll.glb
  - Sandwich.glb, bird.glb, Teeth.glb, Magnet.glb
  - Egg sunny side up.glb, Glass Jar.glb, Cup Of Tea.glb
  - Shoes.glb, Mirror.glb, Watch.glb

## 范围与约束

- **技术栈**：Three.js + Vue 3（TresJS或原生集成）
- **学习成本**：用户无Three.js经验，需要渐进式学习
- **性能约束**：移动端需要可用
- **回退方案**：保留CSS版本作为降级方案

## 技术选型待定

| 方案 | 优势 | 劣势 |
|------|------|------|
| **TresJS** | Vue生态集成好，声明式API | 抽象层，调试复杂 |
| **原生Three.js** | 完全控制，学习价值高 | 与Vue集成需手动处理 |
| **React Three Fiber** | 生态成熟 | 需要React，不适合 |

## 任务列表

---

### **阶段12-02_A：Three.js基础环境搭建**

#### - [ ] 任务A.1：技术选型与依赖安装
- **核心思想**: 确定Three.js集成方案，安装必要依赖
- 交付物：
  - 依赖安装完成（three, @types/three, 可选TresJS）
  - 基础配置文件
- 验收标准：
  - 依赖安装无冲突
  - 基础示例可运行
- **风险评估**: 低风险
- 预期改动文件：
  - `package.json`
  - 可能的vite配置调整
- 执行步骤：
   - [ ] 步骤A.1.1：调研TresJS vs 原生Three.js
   - [ ] 步骤A.1.2：安装依赖
   - [ ] 步骤A.1.3：创建基础3D场景测试

#### - [ ] 任务A.2：GLB模型加载验证
- **核心思想**: 验证现有14个GLB模型能否正确加载和显示
- 交付物：
  - 模型加载工具函数
  - 单个模型展示测试页面
- 验收标准：
  - 至少1个GLB模型正确加载显示
  - 模型材质和光照正常
- **风险评估**: 中风险（模型格式兼容性）
- 执行步骤：
   - [ ] 步骤A.2.1：创建GLB加载器
   - [ ] 步骤A.2.2：测试Tomato.glb加载
   - [ ] 步骤A.2.3：验证材质和光照

---

### **阶段12-02_B：3D售货机场景构建**

#### - [ ] 任务B.1：售货机3D框架
- **核心思想**: 创建3D售货机的基础几何结构
- 交付物：
  - 售货机外壳3D模型（可用基础几何体构建）
  - 14个产品展示格子
  - 基础灯光设置
- 验收标准：
  - 3D售货机框架可见
  - 摄像机角度合适
- **风险评估**: 中风险
- 执行步骤：
   - [ ] 步骤B.1.1：创建售货机外壳几何体
   - [ ] 步骤B.1.2：创建14个展示格子
   - [ ] 步骤B.1.3：设置摄像机和灯光

#### - [ ] 任务B.2：产品模型集成
- **核心思想**: 将14个GLB模型放入对应展示格子
- 交付物：
  - 14个产品模型正确放置
  - 模型缩放和位置调整
- 验收标准：
  - 所有模型正确显示
  - 布局合理美观
- **风险评估**: 中风险
- 执行步骤：
   - [ ] 步骤B.2.1：批量加载GLB模型
   - [ ] 步骤B.2.2：调整每个模型的位置和缩放
   - [ ] 步骤B.2.3：优化模型材质

---

### **阶段12-02_C：交互与视觉增强**

#### - [ ] 任务C.1：点击交互实现
- **核心思想**: 实现3D场景中的点击检测和交互反馈
- 交付物：
  - Raycaster点击检测
  - 点击产品高亮效果
  - 与现有弹窗系统集成
- 验收标准：
  - 点击产品触发弹窗
  - 交互反馈流畅
- **风险评估**: 中风险
- 执行步骤：
   - [ ] 步骤C.1.1：实现Raycaster点击检测
   - [ ] 步骤C.1.2：添加hover/click视觉反馈
   - [ ] 步骤C.1.3：集成ProductModal弹窗

#### - [ ] 任务C.2：视觉效果增强（可选）
- **核心思想**: 添加霓虹灯、粒子效果等视觉增强
- 交付物：
  - 霓虹灯发光效果
  - 蒸汽/烟雾粒子（可选）
  - 后处理效果（bloom、噪点等）
- 验收标准：
  - 视觉效果接近概念图
  - 性能可接受
- **风险评估**: 高风险（性能、复杂度）
- 执行步骤：
   - [ ] 步骤C.2.1：添加霓虹灯光效果
   - [ ] 步骤C.2.2：实现bloom后处理
   - [ ] 步骤C.2.3：添加粒子效果（如时间允许）

---

## 学习资源

- Three.js官方文档：https://threejs.org/docs/
- TresJS文档：https://tresjs.org/
- GLB/GLTF加载：https://threejs.org/docs/#examples/en/loaders/GLTFLoader
- Raycaster交互：https://threejs.org/docs/#api/en/core/Raycaster

## 风险评估

| 风险 | 概率 | 影响 | 缓解措施 |
|------|------|------|----------|
| 学习曲线陡峭 | 高 | 中 | 渐进式学习，先跑通基础 |
| 移动端性能问题 | 中 | 高 | 降级方案（保留CSS版） |
| GLB模型兼容性 | 低 | 中 | 逐个测试，必要时重新导出 |
| 与Vue集成复杂 | 中 | 中 | 使用TresJS简化 |

## 当前状态
🔄 待开始

---
*基于陆家花园项目TODO模板创建*
*前置依赖：曹僧宇宙新品发布POC已完成*
