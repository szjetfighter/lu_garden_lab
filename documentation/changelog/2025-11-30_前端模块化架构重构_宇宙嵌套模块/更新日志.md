# 陆家花园 前端模块化架构重构 更新日志

## 更新概述
本次更新完成了前端模块化架构的重构，采用"宇宙/功能模块"嵌套结构，实现了与Modular Monolith最佳实践的对齐，统一了mao和zhou两个宇宙的目录层级结构。

## 更新日期
2025-11-30

## 更新类型
架构重构

## 主要变更

### 1. 模块结构重构

#### 改动前
```
modules/
├── portal/
├── zhou/           # 宇宙级，内容直接平铺
│   ├── components/
│   ├── views/
│   └── ...
└── moshi/          # 功能级，命名层级不一致
    ├── components/
    ├── views/
    └── ...
```

#### 改动后
```
modules/
├── portal/
├── zhou/                    # 周与春秋宇宙
│   └── lianxi/              # 周与春秋练习（诗集）
│       ├── components/
│       ├── views/
│       ├── services/
│       ├── stores/
│       └── types/
└── mao/                     # 毛小豆宇宙
    └── moshi/               # 摸诗功能
        ├── components/
        ├── views/
        ├── services/
        ├── stores/
        └── types/
```

### 2. 命名一致性

| 宇宙 | 子项目 | 说明 |
|------|--------|------|
| `mao/` | `moshi/` | 摸诗功能模块 |
| `zhou/` | `lianxi/` | 周与春秋练习诗集 |

### 3. 路由配置更新

- `@/modules/moshi/` → `@/modules/mao/moshi/`
- `@/modules/zhou/` → `@/modules/zhou/lianxi/`

### 4. 受影响文件

#### 路由
- `src/router/index.ts` - 更新所有模块import路径

#### Zhou模块
- `src/modules/zhou/lianxi/views/*.vue` - 6个视图文件
- `src/modules/zhou/lianxi/components/*.vue` - 6个组件文件
- `src/modules/zhou/lianxi/stores/zhou.ts`
- `src/modules/zhou/lianxi/types/zhou.ts`
- `src/modules/zhou/lianxi/services/gongBiApi.ts`

#### Mao模块
- `src/modules/mao/moshi/` - 整体从`modules/moshi/`移动

#### Core模块
- `src/core/auth/views/MyWorksView.vue` - 更新PoemViewer引用路径

## 架构决策依据

### Modular Monolith最佳实践
根据 [dev.to/xoubaman/modular-monolith](https://dev.to/xoubaman/modular-monolith-3fg1) 的权威文章：

> "Inside `src` we set a high level structure that tells us first sight what are the different activities our system covers. **Nesting modules is fine** for a more meaningful grouping, although there is no shared code in a parent module."

### 设计原则
1. **模块 = 业务领域边界**：宇宙作为顶级模块
2. **子模块 = 功能/作品**：具体功能或诗集作为子模块
3. **共享代码**：跨宇宙共享放`shared/`，宇宙内共享可放`宇宙/shared/`
4. **命名一致性**：所有宇宙采用相同的嵌套层级

## 验证结果

- [x] TypeScript类型检查通过
- [x] Vite构建成功
- [x] 路由配置正确
- [x] 所有import路径已更新

## 后续扩展

此架构支持未来扩展：
```
zhou/
├── lianxi/          # 周与春秋练习
└── future_work/     # 未来其他诗集

mao/
├── moshi/           # 摸诗
├── tujian/          # 未来：人物图鉴
└── changjing/       # 未来：场景探索
```
