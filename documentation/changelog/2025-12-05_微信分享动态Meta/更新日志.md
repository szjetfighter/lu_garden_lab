# 微信分享动态Meta - 更新日志

> **更新日期**: 2025-12-05  
> **更新类型**: 功能开发  
> **影响范围**: 后端中间件、微信分享体验  

---

## 📋 更新概述

解决微信分享时所有页面显示相同标题和描述的问题。实现后端中间件检测微信爬虫，根据不同路由动态返回对应的og:meta信息。

### 🎯 核心目标
- 微信分享显示页面专属标题和描述
- 不同宇宙/模块有独立的分享信息
- 兼容普通浏览器访问

---

## 🔧 技术方案

### 实现原理
```
请求进入 Express
  ↓
├─ 匹配到配置的路由 + 是爬虫 → 返回动态meta HTML
└─ 其他情况 → 返回原始 index.html（静态meta作为fallback）
```

### 分享配置层级

| 层级 | 路由 | 标题 | 描述 |
|------|------|------|------|
| L0 | `/` | 陆家花园 | 一个诗歌元宇宙项目 |
| L1 | `/zhou` | 周与春秋 | 这里的诗，是你的回答 |
| L1 | `/maoxiaodou` | 毛小豆宇宙 | 毛小豆故事演绎 |
| L1 | `/pending` | 匿，腻，溺 | 实验，以及冒犯 |
| L2 | `/maoxiaodou/moshi` | 摸诗 | 棒子老虎鸡？不如老虎机！ |
| L2 | `/pending/001_newarrival` | NEW ARRIVAL | 贩卖机，卖空气 |
| L2 | `/pending/002_whoiszd` | 谁是ZD | 炎石做得，陆家明做不得？ |

---

## 📁 文件变更

### 新增文件
- `application/src/config/shareConfig.js` - 分享配置（路由→meta映射）

### 修改文件
- `application/server.js` - 添加爬虫检测中间件

---

## 📊 关联Commits

| Commit | 描述 |
|--------|------|
| `7d3bfa2` | feat: 微信分享动态Meta中间件 |
| `cb0f835` | fix: 统一路由标题与分享配置 |
| `823610e` | fix: 前端动态修改og:description解决微信内导航分享问题 |

---

## ✅ 验证结果

- [x] 后端代码完成
- [x] 构建通过
- [ ] VPS部署验证（待执行）
- [ ] 微信实际分享测试（待执行）

---

## 📝 技术说明

### 爬虫检测
通过User-Agent检测`MicroMessenger`关键字识别微信爬虫。

### 动态HTML生成
为爬虫返回包含正确og:meta标签的HTML，普通用户返回标准SPA入口。

---

*创建时间: 2025-12-05*
*状态: A阶段完成，待VPS部署验证*
