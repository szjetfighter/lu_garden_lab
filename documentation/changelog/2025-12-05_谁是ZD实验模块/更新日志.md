# 谁是ZD实验模块 - 更新日志

> **更新日期**: 2025-12-04 ~ 2025-12-05
> **更新类型**: 新功能开发 / 实验模块
> **影响范围**: pending/002_whoiszd模块

---

## 📋 更新概述

构建一个关于AI诗歌模仿与"光晕消逝"的社会学实验游戏模块。用户判断20首诗歌是否为臧棣所写（实际全部由陆家明AI生成），探讨AI模仿能力、诗人风格的可编码性。

### 🎯 核心概念

- 100首诗全部由AI生成，模仿ZD风格
- 用户以为自己是"裁判"，实际是"共谋者"
- 入口声明"你可能被冒犯"，真正被冒犯的是ZD
- 连续3次选"是" → 判定无法辨别 → 强制终止并冷却60秒

---

## 🔧 技术变更

### 阶段A：模块基础架构（2025-12-04）

#### A.1 模块目录结构与路由

- 创建whoiszd模块骨架
- 类型定义（ZangdiPoem, UserGameState, CooldownState）
- 路由注册到pending宇宙

#### A.2 完整游戏流程

- `useCooldown.ts` - 冷却状态管理
- `useGameState.ts` - 游戏状态管理
- 声明页 → 确认页 → 游戏页 → 结算页 完整流程
- 惩罚机制（连续选"是"触发终止）

#### A.3 ZD风格诗歌生成

- ZD诗学研究报告
- 20首模仿诗歌（XX入门/丛书/协会/简史命名法）

### 阶段B：pending宇宙整合与UI规范化（2025-12-05）

#### B.1 pending宇宙L0/L1入口配置

- portal.ts添加pending宇宙到L0门户
- 创建MainProjectSelection.vue（L1入口）
- 更新子模块入口文案

#### B.2 pending宇宙授权码门禁

- AuthGate.vue授权码验证页面
- SHA-256哈希存储，源码不暴露明文
- 路由守卫防止绕过授权
- 三层弹窗获取授权码提示

#### B.3 UI设计系统统一化

- 深色主题CSS变量（容器级注入）
- reveal-line逐行显示动画
- 确认状态localStorage记忆
- 分场景结果文案

#### B.4 Modular Monolith重构

- views/组件移到components/，重命名为Phase后缀
- Shell Component Pattern（EntryGuard统一管理）
- index.ts只导出公共接口

---

## 📁 文件结构

```
pending/002_whoiszd/
├── index.ts                    # 模块导出
├── types/whoiszd.ts            # 类型定义
├── data/poems.json             # 20首AI生成诗歌
├── docs/ZD研究报告.md          # 诗学研究
├── composables/
│   ├── useCooldown.ts          # 冷却状态
│   └── useGameState.ts         # 游戏状态
├── components/
│   ├── ConfirmPhase.vue        # 确认阶段
│   ├── GamePhase.vue           # 游戏阶段
│   ├── TerminatedPhase.vue     # 终止阶段
│   └── ResultPhase.vue         # 结算阶段
└── views/
    └── EntryGuard.vue          # 入口守卫（Shell Component）
```

---

## 📊 关联Commits

| Commit      | 描述                                                     |
| ----------- | -------------------------------------------------------- |
| `ff1bc4f` | feat: 完成谁是ZD实验模块阶段A - 基础架构与20首诗歌生成 |
| `a6a1a75` | feat: 完成whoiszd模块UI设计系统统一化与交互优化 (B.3)    |
| `62cb10e` | feat(whoiszd): B.3 诗库扩展与结果页优化                  |
| `f47d435` | feat: 完成pending宇宙授权码门禁(任务B.2)                 |
| `f0e69ed` | feat: 完成pending宇宙L0/L1入口配置(任务B.1)              |
| `c1d1786` | refactor: pending宇宙UI统一与Modular Monolith重构 (B.4)  |
| `622350e` | style: whoiszd终止页面文案居中优化                       |
| `2c08dbe` | style: whoiszd冷却/终止页面UI优化                        |
| `fb49073` | style: whoiszd按钮样式统一到portal比例                   |

---

## ✅ 验证结果

- [X] 完整游戏流程可走通
- [X] 惩罚机制正常工作
- [X] 冷却期倒计时正常
- [X] 授权码门禁功能完整
- [X] UI风格统一（深色主题）
- [X] TypeScript类型检查通过
- [X] 构建无报错

---

## 📝 设计亮点

### 叙事诡计

用户签署的是"我同意被冒犯"的契约，进入后发现被冒犯的不是自己，是ZD。用户从"受害者预期"转为"共谋者身份"。

### 惩罚文案

- 终止页：「朋友，你似乎不具备鉴别诗人和机器的能力。呼，真遗憾呢 😏」
- 冷却页：「朋友，审美的事，急不来。嘻嘻，你说呢？」

### 结算分场景

根据用户选择"是"的次数，提供不同的揭示文案和解读。

---

*创建时间: 2025-12-04*
*完成时间: 2025-12-05*
