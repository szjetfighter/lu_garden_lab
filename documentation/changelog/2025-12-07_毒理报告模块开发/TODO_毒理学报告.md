# 毒理学报告 (The Toxicology Report) 模块开发 TODO

> **🤖 AI 助手注意 (AI Assistant Attention)**
> 在执行本文件中的任何任务前，你必须首先阅读并严格遵守位于 `documentation/ai-collaboration-guide.md` 的全局协作指南。

## 目标
实现代号为"毒理学报告"（004_toxicology）的诗歌交互模块。该模块是一个"反诗歌"的实验场，通过"离心机"隐喻，让用户通过旋钮控制RPM（转速），暴力剥离诗歌中的修辞（形容词、虚词），最终只保留极高纯度的"有效成分"（名词/动词）。体验应具有工业废土感、医疗冷酷感和故障艺术风格。

## 范围与约束
- **范围**: `lugarden_universal/frontend_vue/src/modules/pending/004_toxicology`
- **约束**:
  - **核心隐喻**: 离心机 (The Centrifuge)
  - **视觉风格**: 工业废土、ICU监护仪、故障艺术 (Glitch)
  - **技术栈**: Three.js + InstancedMesh + Custom Shaders + EffectComposer
  - **性能要求**: 支持数百个文字粒子的实时物理模拟和特效渲染

## 任务列表

> **任务编号规范**
> - 阶段12-07_A使用前缀"A"：任务A.1、任务A.2 …；步骤使用"A.1.x"的三级编号

---

### **阶段12-07_A：概念验证 (POC) 与核心功能实现**

#### - [x] 任务A.1：基础设施与数据预处理
- **核心思想**: 建立模块脚手架，并将《一剂》诗歌转化为带权重的结构化数据
- 交付物：
  - 模块目录结构 `004_toxicology/`
  - 结构化诗歌数据 `poems.ts` (包含 Weight: 1/0.5/0)
  - 基础路由配置
- 验收标准：
  - 目录结构符合项目规范
  - 能够以JSON格式获取《鸣放》等诗歌的词性权重数据

#### - [x] 任务A.2：视觉核心 (Three.js + Shader)
- **核心思想**: 搭建"工业废土"风格的3D场景，实现文字粒子的渲染与故障效果
- 交付物：
  - `ToxicologyScene.vue`
  - 基于 `InstancedMesh` 的文字渲染系统
  - 自定义 Shader (vertex/fragment) 实现基础渲染
  - 后期处理管线 (Bloom + Noise/Scanlines)
- 验收标准：
  - 场景呈现黑/绿/锈色调的工业风格
  - 文字清晰显示，带有CRT显示器的网格和噪点质感

#### - [x] 任务A.3：离心物理引擎
- **核心思想**: 实现RPM旋钮交互，以及基于转速的粒子剥离物理逻辑
- 交付物：
  - `ControlKnob.vue` (RPM旋钮)
  - 物理引擎：计算离心力 (Centrifugal Force)
  - 粒子行为：根据 Weight 决定剥离阈值和飞行轨迹
- 验收标准：
  - 旋钮可顺畅控制 RPM (0-9000)
  - 低转速时：文字轻微抖动
  - 中转速时：形容词/虚词 (Weight 0) 飞出屏幕
  - 高转速时：结构崩塌，仅剩核心词 (Weight 1)

#### - [x] 任务A.4：氛围与故障艺术
- **核心思想**: 增强"医疗事故"的沉浸感，添加声音和剧烈的视觉反馈
- 交付物：
  - Glitch Pass (画面撕裂/色差)
  - 音效集成 (电流声、心跳声、急停声)
  - 医疗警告 UI (`ClinicalMonitor.vue`)
- 验收标准：
  - RPM过载时画面出现剧烈 Glitch
  - 音效 Pitch/Volume 随 RPM 变化

#### - [x] 任务A.5：入口集成
- **核心思想**: 将新模块接入 pending 宇宙入口
- 交付物：
  - `MainProjectSelection.vue` 新增卡片
  - 模块注册与导出
- 验收标准：
  - 首页可点击进入 "毒理学报告"

---

## 测试与验收
- [ ] 诗歌《鸣放》能否正确加载并解析权重
- [ ] RPM旋钮交互是否流畅
- [ ] 粒子剥离逻辑是否符合"词性权重"设计
- [ ] 性能测试：60FPS @ 1000粒子

## 更新日志关联
- **预计更新类型**: 新功能开发
- **更新目录**: `documentation/changelog/2025-12-07_毒理学报告模块开发/`

## 注意事项
- 优先保证物理手感的"爽脆"和"残酷"
- 故障效果需克制，避免引发光敏性癫痫风险
- 诗歌数据的结构化需要人工校对，确保"核心成分"提取准确

## 完成后的操作
- [ ] 将本TODO文件移动到更新目录
- [ ] 更新对应的更新日志文档
- [ ] 提交所有更改到Git

## 当前状态
🔄 进行中

---
*本模板基于陆家花园项目Git开发指南创建*
