以下是关于陆家花园“毛小豆宇宙”视觉小说（Visual Novel, VN）开发技术选型的最终确认报告。

本报告基于陆家花园当前的技术架构现状、行业主流解决方案的对比，以及项目核心艺术理念的工程化需求，做出以下战略判断。

### 一、 陆家花园现有技术底座 (Current Technical Foundation)

陆家花园并非从零开始的独立游戏项目，而是一个已经具备生产级标准的元宇宙生态系统。其技术特征表现为：

* **架构模式：** 采用 **Modular Monolith（模块化单体）** 架构。前端已完成 `<span class="citation-55">universe/feature</span>` 的嵌套结构重构（如 `<span class="citation-55">modules/mao/moshi</span>`），后端实现了业务数据与认证数据的 **双数据库隔离（lugarden.db + auth.db）**^1^^1^^1^^1^。
* **工程栈：** 前端基于  **Vue 3 + TypeScript + UnoCSS** **，具备极强的组件化复用能力与文字排版控制力 **^2^^2^^2^^2^；后端基于  **Express + Prisma** **，已建立了包含诗节（Stanza）、场景（Scene）、术语（Terminology）在内的严密数据治理体系 **^3^^3^^3^^3^。
* **智能中台：** 集成了  **Dify AI 工作流** **，具备“反讽式解读”与“对抗生成”能力，并通过异步 API（Fire-and-Track）实现了与主站的深度互联 **^4^^4^^4^^4^。

### 二、 视觉小说领域的技术图谱 (Industry Landscape)

在视觉小说开发领域，技术路线主要呈现两极分化：

* **独立游戏路线（以 Ren'Py 为代表）：**
  * **特点：** 占据 Steam 市场 90% 份额，提供开箱即用的存档、回滚与多平台打包功能。
  * **局限：** 本质为封闭的桌面端引擎。其 UI 系统难以实现复杂的 Web 交互（如富文本点击弹窗），且难以与陆家花园现有的 Web 后端数据库及 AI 服务进行深度实时通讯。
* **Web 创意交互路线（以 React Three Fiber / Pixi.js 为代表）：**
  * **特点：** 侧重于视觉冲击力与 3D 渲染，常用于创意营销网站或数字艺术展示。
  * **局限：** 往往缺乏文字排版引擎与复杂的工程架构支撑，难以承载高密度的叙事文本。

### 三、 选定技术栈的判断逻辑与依据 (Strategic Decision)

基于上述分析，陆家花园最终确认的技术路线为：**坚持 Vue 3 生态，自研轻量级 VN 引擎，并引入 TresJS (Three.js) 实现高维视觉表现。**

判断依据如下：

#### 1. 核心玩法决定技术归属：超文本交互的必然性

**毛小豆宇宙的核心诗学理念是 ** **“门禁社区”** **，即要求用户通过点击文本中的“黑话（Terminology）”来调取数据库解释，从而解锁深层叙事 **^5^。

* **判断：** 这种基于文本的精细交互（Hypertext Interaction）是 **DOM（文档对象模型）** 的原生优势。使用 Vue 实现“点击文字唤起知识库弹窗”是低成本、高体验的降维打击；而在传统游戏引擎中实现此类富文本交互成本极高且体验生硬。

#### 2. 系统生态的连通性：非孤岛策略

陆家花园旨在构建一个互联的元宇宙，而非孤立的游戏文件。

* **判断：** 视觉小说模块需要实时读取用户的全局状态（如“烦躁值”、“倦怠值”），调用 Dify 生成动态剧情，并复用 Prisma 中已有的角色与场景数据。**Vue + TypeScript** 是唯一能无缝接入陆家花园现有 `lugarden_universal` 架构，并复用 `enhancedApi` 与类型系统的技术栈。

#### 3. 视觉上限的突破：异质空间的构建

针对“Fancy”的视觉需求，陆家花园需要在保持极简阅读体验的同时，提供震撼的视觉高潮。

* **判断：** 引入 **TresJS** 允许项目在 Vue 组件体系内直接驱动  **Three.js** 。这使得陆家花园能够以极低的工程成本，在“摸诗”或“剧情高潮”节点嵌入赛博朋克风格的 3D 场景、动态光影与粒子特效，实现从 2D 排版到 3D 沉浸的瞬间切换，建立视觉护城河。

#### 4. 工程能力的资产化：长期主义

* **判断：** 选择 Ren'Py 只能掌握一种专用脚本语言；而基于 Vue 自研 VN 引擎，将迫使团队解决状态机设计、资源预加载、混合渲染等通用工程难题。这不仅服务于当前项目，更将转化为陆家花园长期可复用的核心工程能力，符合项目“锻炼开发工程能力”的初衷。
